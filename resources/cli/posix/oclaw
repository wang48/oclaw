#!/bin/sh
# Oclaw CLI â€” Desktop AI agent runtime and control plane
# Do not edit manually. Regenerated on Oclaw updates.

# Resolve the real path of this script (follow symlinks)
SCRIPT="$0"
while [ -L "$SCRIPT" ]; do
  SCRIPT_DIR="$(cd -P "$(dirname "$SCRIPT")" && pwd)"
  SCRIPT="$(readlink "$SCRIPT")"
  [ "${SCRIPT#/}" = "$SCRIPT" ] && SCRIPT="$SCRIPT_DIR/$SCRIPT"
done
SCRIPT_DIR="$(cd -P "$(dirname "$SCRIPT")" && pwd)"

if [ "$(uname)" = "Darwin" ]; then
  # macOS: <App>.app/Contents/Resources/cli/oclaw
  # SCRIPT_DIR = .../Contents/Resources/cli
  CONTENTS_DIR="$(dirname "$(dirname "$SCRIPT_DIR")")"
  ELECTRON="$CONTENTS_DIR/MacOS/Oclaw"
else
  # Linux: /opt/Oclaw/resources/cli/oclaw
  # SCRIPT_DIR = .../resources/cli
  INSTALL_DIR="$(dirname "$(dirname "$SCRIPT_DIR")")"
  ELECTRON="$INSTALL_DIR/oclaw"
fi

if [ ! -f "$ELECTRON" ]; then
  echo "Error: Oclaw executable not found at $ELECTRON" >&2
  echo "Please reinstall Oclaw or remove this script: $0" >&2
  exit 1
fi

# Pass all arguments to Oclaw in CLI mode
exec "$ELECTRON" --cli "$@"
